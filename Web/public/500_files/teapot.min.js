!function() {
    !function(a, b, c, d, e, f, g) {
        a["GoogleAnalyticsObject"] = e;
        a[e] = a[e] || function() {
            (a[e].q = a[e].q || []).push(arguments);
        }, a[e].l = 1 * new Date();
        f = b.createElement(c), g = b.getElementsByTagName(c)[0];
        f.async = 1;
        f.src = d;
        g.parentNode.insertBefore(f, g);
    }(window, document, "script", "//www.google-analytics.com/analytics.js", "ga");
    ga("create", "UA-50529604-1", "auto");
    ga("send", "pageview");
    Teabot = function() {
        if (!Function.prototype.bind || !Element.prototype.addEventListener) return;
        this.bot_ = document.getElementById("teabot");
        this.cup_ = document.getElementById("teacup");
        this.offset_ = null;
        this.tilt_ = 0;
        this.bot_.addEventListener("click", this.pour_.bind(this, Teabot.MAX, true));
        if (!window.DeviceOrientationEvent) return;
        window.addEventListener("deviceorientation", this.tip_.bind(this));
        window.addEventListener("onorientationchange" in window && "orientationchange" || "resize", this.reset_.bind(this), false);
    };
    Teabot.MAX = -30;
    Teabot.MIN = 10;
    Teabot.STEP = 5;
    Teabot.WAIT = 5e3;
    Teabot.prototype.tip_ = function(a) {
        if (null === a.gamma) return;
        var b = Math.round(a.gamma / Teabot.STEP) * Teabot.STEP;
        if (null === this.offset_) this.offset_ = b;
        b -= this.offset_;
        if (this.tilt_ == b) return;
        this.tilt_ = b;
        this.pour_(b);
    };
    Teabot.prototype.pour_ = function(a, b) {
        var a = Math.min(Math.max(a, Teabot.MAX), Teabot.MIN);
        var c = [];
        if (a < -Teabot.STEP) c.push("tip");
        if (a == Teabot.MAX) c.push("pour");
        this.bot_.className = c.join(" ");
        var d = this.bot_.style;
        d.transform = d.MozTransform = d.msTransform = d.webkitTransform = "rotate(" + a + "deg)";
        if (b) window.setTimeout(this.stop_.bind(this), Teabot.WAIT);
        if (window["ga"]) window["ga"]("send", "event", "teabot", "pour", "tilt", a);
    };
    Teabot.prototype.stop_ = function() {
        this.pour_(0);
    };
    Teabot.prototype.reset_ = function() {
        this.offset_ = null;
        this.tilt_ = 0;
        this.stop_();
    };
    new Teabot();
}();